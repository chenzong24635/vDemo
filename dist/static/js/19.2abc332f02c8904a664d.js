webpackJsonp([19],{"0zIB":function(t,s){},"1SgU":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("rLAy"),i=e("63CM"),o=e("62KO"),r=e("YxJB"),n=e("3Lt7"),l=e("/0UN"),c=e("hGvq"),p=e("2sLL"),u=e("pDNl"),d=e("rHil"),m=e("ALGc"),h=e("oWtu"),v=e("4FCr"),f=e("Yf01"),g=(i.a,a.a,o.a,r.a,n.a,l.a,c.a,p.a,u.a,d.a,m.a,h.a,f.a,v.a,{directives:{TransferDom:i.a},components:{Toast:a.a,Confirm:o.a,Flexbox:r.a,FlexboxItem:n.a,Checker:l.a,CheckerItem:c.a,XButton:p.a,XInput:u.a,Group:d.a,XTextarea:m.a,Icon:h.a,scrollTop:f.a,LoadMore:v.a},data:function(){return{type:"",btnId:"",confirmShow:!1,toastData:{isShow:!1,type:"success",text:"订单已取消"},tabIndex:0,tabs:[{title:"全部订单",status:0},{title:"代付款",status:1},{title:"待发货",status:2},{title:"待收货",status:4},{title:"已完成",status:5}],json:{order:"ASC",pageNum:1,pageSize:6,status:"",typeid:""},orderUrl:"order/orderlist",lists:[],loading:!1,isLastPage:!1,nofreight:localStorage.getItem("nofreight"),freight:localStorage.getItem("freight")}},created:function(){var t=this.$route.params.type/1,s=this.$route.params.id/1,e=null;switch(this.tabIndex=s,this.type=t,1===t?(this.orderUrl="order/orderlist",this.json.typeid=1):2===t?(this.orderUrl="order/orderintegrallist",this.json.typeid=1):3===t&&(this.orderUrl="order/orderlist",this.json.typeid=3),s){case 0:e=0;break;case 1:e=1;break;case 2:e=2;break;case 3:e=4;break;case 4:e=5}this.getLists(e)},methods:{tab:function(t){this.tabIndex=t,this.reset(),this.getLists(this.tabs[t].status)},getLists:function(t){var s=this;this.json.status=t,this.axios.post(this.orderUrl,this.json).then(function(e){if(e.success){var a=e.data;if(s.isLastPage)return;a.isLastPage&&(s.isLastPage=!0);var i=a.list;i.map(function(e,a){switch(e.status/1){case 1:e.statusText="待付款";break;case 2:e.statusText="待发货";break;case 3:case 4:e.statusText="待收货";break;case 5:e.statusText="已完成";break;case 10:e.statusText="取消订单"}e.orderprolist?(console.log(e.orderprolist.length),e.orderprolist.length>0&&e.orderprolist.map(function(t,e){var a="";0===t.types?a="":1===t.types?a="满赠":2===t.types&&(a="买赠"),t.type=a,t.pic=s.base_img+t.pic})):(e.status===t||0===t?(e.pic=s.base_img+e.propic,e.pid=e.proid,e.num=e.pronumber,e.ptitle=e.proname,e.amount=e.integral,e.orderprolist=[e]):(i=[],e.orderprolist=[]),console.log(e))}),s.json.pageNum/1==1?s.lists=i:s.lists=s.lists.concat(i),s.loading=!1,s.json.pageNum++}}),console.log(this.lists)},loadMore:function(){this.isLastPage||(this.loading=!0,this.getLists(this.json.status))},cancle:function(t){this.confirmShow=!0,this.btnId=t,console.log(t)},detailLink:function(t){this.$router.push({name:"orderDetail",params:{type:this.type,id:t}}),console.log(t)},pay:function(t){console.log(t)},reset:function(){this.lists=[],this.json.pageNum=1,this.loading=!1,this.isLastPage=!1},onConfirm:function(){var t=this,s=this.btnId;this.axios.get("order/ordercancel/"+s).then(function(e){e.success&&(t.toastData.isShow=!0,t.lists.some(function(e,a){e.id===s&&t.lists.splice(a,1)}))}),console.log("on confirm",s)}}}),_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{},[e("scrollTop"),t._v(" "),e("section",{staticClass:"vux-1px-b "},[e("ul",{staticClass:"tabs"},t._l(t.tabs,function(s,a){return e("li",{key:a,class:[t.tabIndex===a?"active":"","tab"],on:{click:function(s){t.tab(a)}}},[e("span",[t._v(t._s(s.title))])])}),0)]),t._v(" "),e("section",[e("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{id:"lists","infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},t._l(t.lists,function(s,a){return e("li",{key:a,staticClass:"list bb10"},[e("p",{staticClass:"list-top flex01 vux-1px-b"},[e("span",[t._v("订单编号："+t._s(s.orderid))]),t._v(" "),e("span",{staticClass:"status"},[t._v(t._s(s.statusText))])]),t._v(" "),e("ul",{},t._l(s.orderprolist,function(s,a){return e("li",{key:a,staticClass:"list1 vux-1px-b"},[e("flexbox",[e("flexbox-item",{attrs:{span:3}},[e("router-link",{staticClass:"flex-demo flex-demo-img",attrs:{to:{name:"productDetail",params:{type:t.type,id:s.pid}}}},[e("img",{staticClass:"img-title",attrs:{src:s.pic,onerror:"this.src='static/images/errorImg.jpg'"}})])],1),t._v(" "),e("flexbox-item",{attrs:{span:7}},[e("p",{staticClass:"ptitle"},[t._v(t._s(s.ptitle))]),t._v(" "),e("p",{staticClass:"type"},[t._v(t._s(s.type))])]),t._v(" "),e("flexbox-item",{attrs:{span:2}},[e("div",{staticClass:"flex-demo"},[2===t.type?e("p",[t._v(t._s(s.amount/s.num)+" 积分")]):e("p",[t._v("￥"+t._s(s.amount/s.num))]),t._v(" "),e("p",{staticClass:"flex01-1"},[e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-close-empty",attrs:{type:"ios-close-empty",size:"20",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 512 512"}},[e("path",{staticClass:"st0",attrs:{d:"M340.2 160l-84.4 84.3-84-83.9-11.8 11.8 84 83.8-84 83.9 11.8 11.7 84-83.8 84.4 84.2 11.8-11.7-84.4-84.3 84.4-84.2z"}})]),t._v(t._s(s.num))])])])],1)],1)}),0),t._v(" "),2===t.type?e("p",{staticClass:"total tar"},[t._v("\n          共"+t._s(s.orderprolist.length)+"件商品, 合计："),e("span",[t._v(t._s(s.amount)+" 积分")])]):e("p",{staticClass:"total tar"},[t._v("\n          共"+t._s(s.orderprolist.length)+"件商品, 合计:￥"),e("span",[t._v(t._s(s.payamount))]),t._v("\n          (含运费："+t._s(s.amount>t.nofreight?0:t.freight)+")\n        ")]),t._v(" "),e("div",{staticClass:"x-btns tar"},[e("x-button",{directives:[{name:"show",rawName:"v-show",value:1===s.status,expression:"item.status === 1"}],attrs:{mini:"",type:"default",plain:""},nativeOn:{click:function(e){t.cancle(s.id)}}},[t._v("取消订单")]),t._v(" "),e("x-button",{attrs:{mini:"",type:"default",plain:""},nativeOn:{click:function(e){t.detailLink(s.id)}}},[t._v("订单详情")]),t._v(" "),e("x-button",{directives:[{name:"show",rawName:"v-show",value:1===s.status,expression:"item.status === 1"}],attrs:{mini:"",type:"default",plain:""},nativeOn:{click:function(e){t.pay(s.id)}}},[t._v("付款")])],1)])}),0),t._v(" "),0===t.lists.length?e("load-more",{attrs:{"show-loading":!1,tip:"暂无数据"}}):t._e(),t._v(" "),e("div",[t.isLastPage?t._e():e("load-more",{attrs:{tip:"正在加载"}}),t._v(" "),t.isLastPage&&0!==t.lists.length?e("load-more",{attrs:{"show-loading":!1,tip:"到底了"}}):t._e()],1)],1),t._v(" "),e("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[e("confirm",{attrs:{title:"确认删除?"},on:{"on-confirm":t.onConfirm},model:{value:t.confirmShow,callback:function(s){t.confirmShow=s},expression:"confirmShow"}})],1),t._v(" "),e("toast",{attrs:{type:t.toastData.type,text:t.toastData.text,width:"45vw",time:1e3,"is-show-mask":!0,position:"middle"},model:{value:t.toastData.isShow,callback:function(s){t.$set(t.toastData,"isShow",s)},expression:"toastData.isShow"}})],1)},staticRenderFns:[]};var x=e("VU/8")(g,_,!1,function(t){e("0zIB")},"data-v-e7cefc0a",null);s.default=x.exports}});
//# sourceMappingURL=19.2abc332f02c8904a664d.js.map